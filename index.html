<!doctype html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistem Semakan Kedudukan Kelas</title>

<style>
body{
  margin:0;
  font-family:Segoe UI,Tahoma,Verdana,sans-serif;
  background:#fff7cc;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.container{max-width:520px;width:100%;padding:24px}
.screen{display:none}
.screen.active{display:block}
button{
  width:100%;padding:16px;border:none;border-radius:999px;
  font-weight:800;margin-bottom:12px;cursor:pointer;
  background:#ffc4d6;
}
.secondary{background:#eee}
.card{
  background:#fff;padding:20px;border-radius:20px;
}
.field{border-bottom:1px solid #eee;padding:10px 0}
.label{font-size:.75rem;color:#777;font-weight:800}
.value{font-size:1.05rem;font-weight:800}
</style>
</head>

<body>
<div class="container">

<section id="home" class="screen active">
  <h1>Sistem Semakan Kedudukan Kelas</h1>
  <button onclick="start(2)">Tingkatan 2</button>
  <button onclick="start(3)">Tingkatan 3</button>
</section>

<section id="input" class="screen">
  <h2 id="title"></h2>
  <div class="card">
    <input id="ic" placeholder="No IC 12 digit" style="width:100%;padding:12px">
    <button onclick="submit()">Semak</button>
    <button class="secondary" onclick="home()">Kembali</button>
  </div>
</section>

<section id="result" class="screen">
  <h2>Keputusan</h2>
  <div id="box" class="card"></div>
  <button class="secondary" onclick="home()">Main Page</button>
</section>

<section id="error" class="screen">
  <div id="err" class="card"></div>
  <button class="secondary" onclick="home()">Main Page</button>
</section>

</div>

<script>
const API="PASTE_URL_WEB_APP_DI_SINI";
let ting=null;

function show(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
function home(){show("home")}
function start(t){
  ting=t;
  document.getElementById("title").innerText="Tingkatan "+t;
  show("input");
}
function submit(){
  const ic=document.getElementById("ic").value.replace(/\D/g,"");
  if(ic.length!==12){alert("IC mesti 12 digit");return;}
  fetch(`${API}?ting=${ting}&ic=${ic}`)
    .then(r=>r.json())
    .then(d=>{
      if(!d.ok) throw "No data";
      let h="";
      h+=row("Nama",d.nama);
      h+=row("Jantina",d.jantina);
      h+=row("Bangsa",d.bangsa);
      h+=row("KDK",d.kdk);
      h+=row("KDT",d.kdt);
      h+=row("Kelas 2025",d.kelas_2025);
      h+=row("Kelas 2026",d.kelas_2026);
      h+=row("Guru Tingkatan 2026",d.guru_tingkatan_2026);
      document.getElementById("box").innerHTML=h;
      show("result");
    })
    .catch(()=>{document.getElementById("err").innerText="Rekod tidak dijumpai";show("error")});
}
function row(l,v){
  return `<div class="field"><div class="label">${l}</div><div class="value">${v||"-"}</div></div>`;
}
</script>
</body>
</html>
